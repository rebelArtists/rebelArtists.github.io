import{u as n}from"./index.af1b1cb0.js";import{e as a,o as s,c as t,a as l,B as e,A as o,b as i,F as d}from"./vendor.45f5d20f.js";const u={name:"CrowdsaleComp",emits:["like-event"],components:{},data:()=>({componentKey:0,animating:!1,tokenCount:0,tokenCountValid:!1,loading:!1}),mounted(){this.$nextTick((()=>{this.getCrowdsaleDetails()}))},methods:{async sendTokens(){if(this.tokenCountValid){this.loading=!0;const{sendCrowdsaleTokens:a}=n();console.log(this.tokenCount.toString()),await a(this.tokenCount.toString()),this.getCrowdsaleDetails()}else console.log("fix input values and try again");this.loading=!1},async getCrowdsaleDetails(){const{getAmtRaised:a,getUserAmtDonated:s}=n();await a(),await s(),this.componentKey+=1},async withdrawCrowdsaleFundsAdmin(){const{withdrawCrowdsaleFunds:a}=n();await a(),this.componentKey+=1},async withdrawDappFundsAdmin(){const{withdrawDappFunds:a}=n();await a(),this.componentKey+=1},validateTokenCount(n){this.tokenCount=n.target.value,this.tokenCount>=1&&this.tokenCount<=1e6?this.tokenCountValid=!0:this.tokenCountValid=!1}},watch:{},setup(){const s=n(),{amtRaised:t,userContribution:l}=a(s);return{amtRaised:t,userContribution:l}}},r={class:"adminWrapper"},c=e(" ADMIN "),w={class:"crowdsaleWrapper"},p={class:"login-box"},h=l("h2",null,"Crowdsale",-1),C={class:"crowdsaleStats"},m=e("Available: "),k=l("br",null,null,-1),g=e("Your Stake: "),b=l("br",null,null,-1),v=e("Raised: "),y=l("br",null,null,-1),A={class:"user-box"},f=e("# Tokens to Buy "),D={key:0,class:"warningTextCrowdsale"},T={key:1,class:"successfulTextCrowdsale"},F={class:"purchaseButton"},x=[l("span",null,null,-1),l("span",null,null,-1),l("span",null,null,-1),l("span",null,null,-1),e(" Purchase ")],R={key:1,class:"loading-crowdsale animated fadeIn"},V=[l("span",null,null,-1),l("span",null,null,-1),l("span",null,null,-1),l("span",null,null,-1),e(" Purchasing "),l("div",{class:"bgFollow"},null,-1)];u.render=function(n,a,u,I,M,B){return s(),t(d,null,[l("div",r,[c,l("div",w,[l("a",{class:"withdrawHover",onClick:a[0]||(a[0]=(...n)=>B.withdrawCrowdsaleFundsAdmin&&B.withdrawCrowdsaleFundsAdmin(...n))}," Withdraw Crowdsale ")]),l("div",null,[l("a",{class:"withdrawHoverDapp",onClick:a[1]||(a[1]=(...n)=>B.withdrawDappFundsAdmin&&B.withdrawDappFundsAdmin(...n))}," Withdraw DAPP ")])]),l("div",p,[h,l("span",C,[l("h4",null,[m,k,e(o(5e8-I.amtRaised)+" REBEL",1)]),l("h4",null,[g,b,e(o(I.userContribution)+" MATIC",1)]),l("h4",null,[v,y,e(o(I.amtRaised)+" MATIC",1)])]),l("form",null,[l("div",A,[l("input",{type:"number",min:"0",step:".001",onInput:a[2]||(a[2]=n=>B.validateTokenCount(n))},null,32),l("label",null,[f,this.tokenCountValid?i("",!0):(s(),t("span",D," (must be between 1-1MM) ")),this.tokenCountValid?(s(),t("span",T," âœ“ ")):i("",!0)])]),l("div",F,[M.loading?i("",!0):(s(),t("a",{key:0,class:"purchaseHover",onClick:a[3]||(a[3]=n=>B.sendTokens())},x)),M.loading?(s(),t("a",R,V)):i("",!0)])])])],64)};export{u as default};
